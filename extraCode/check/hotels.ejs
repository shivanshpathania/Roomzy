<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Hotel Search - Book Your Stay</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
        background-color: #f8fafc;
        line-height: 1.6;
      }

      /* Header */
      .header {
        background: linear-gradient(135deg, #0f3460 0%, #1a4d8f 100%);
        color: white;
        padding: 1rem 0;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
      }

      .header-content {
        max-width: 1200px;
        margin: 0 auto;
        padding: 0 20px;
        display: flex;
        justify-content: space-between;
        align-items: center;
      }

      .logo {
        font-size: 1.8rem;
        font-weight: bold;
      }

      .nav-links {
        display: flex;
        gap: 2rem;
        align-items: center;
      }

      .nav-links a {
        color: white;
        text-decoration: none;
        transition: opacity 0.3s;
      }

      .nav-links a:hover {
        opacity: 0.8;
      }

      /* Search Section */
      .search-section {
        background: white;
        padding: 2rem 0;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
      }

      .search-container {
        max-width: 1200px;
        margin: 0 auto;
        padding: 0 20px;
      }

      .search-form {
        display: grid;
        grid-template-columns: 2fr 1fr 1fr 1fr auto;
        gap: 1rem;
        align-items: end;
      }

      .form-group {
        display: flex;
        flex-direction: column;
      }

      .form-group label {
        font-weight: 600;
        margin-bottom: 0.5rem;
        color: #374151;
      }

      .form-group input,
      .form-group select {
        padding: 0.75rem;
        border: 2px solid #e5e7eb;
        border-radius: 8px;
        font-size: 1rem;
        transition: border-color 0.3s;
      }

      .form-group input:focus,
      .form-group select:focus {
        outline: none;
        border-color: #0f3460;
      }

      .search-btn {
        background: #0f3460;
        color: white;
        border: none;
        padding: 0.75rem 2rem;
        border-radius: 8px;
        font-size: 1rem;
        cursor: pointer;
        transition: background-color 0.3s;
      }

      .search-btn:hover {
        background: #1a4d8f;
      }

      /* Filters and Results */
      .main-content {
        max-width: 1200px;
        margin: 2rem auto;
        padding: 0 20px;
        display: grid;
        grid-template-columns: 280px 1fr;
        gap: 2rem;
      }

      /* Sidebar Filters */
      .filters {
        background: white;
        padding: 1.5rem;
        border-radius: 12px;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
        height: fit-content;
        position: sticky;
        top: 2rem;
      }

      .filter-section {
        margin-bottom: 2rem;
      }

      .filter-section h3 {
        font-size: 1.1rem;
        margin-bottom: 1rem;
        color: #374151;
        border-bottom: 2px solid #f3f4f6;
        padding-bottom: 0.5rem;
      }

      .price-range {
        display: flex;
        gap: 0.5rem;
        align-items: center;
      }

      .price-input {
        width: 80px;
        padding: 0.5rem;
        border: 1px solid #d1d5db;
        border-radius: 4px;
      }

      .star-rating {
        display: flex;
        flex-direction: column;
        gap: 0.5rem;
      }

      .star-option {
        display: flex;
        align-items: center;
        gap: 0.5rem;
      }

      .amenities {
        display: flex;
        flex-direction: column;
        gap: 0.5rem;
      }

      .amenity-option {
        display: flex;
        align-items: center;
        gap: 0.5rem;
      }

      /* Currency Converter Widget */
      .currency-widget {
        background: white;
        padding: 1rem;
        border-radius: 8px;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
        margin-bottom: 1rem;
      }

      .currency-widget h4 {
        margin-bottom: 0.5rem;
        color: #374151;
        font-size: 0.9rem;
      }

      .currency-converter {
        display: flex;
        gap: 0.5rem;
        align-items: center;
      }

      .currency-input {
        width: 80px;
        padding: 0.4rem;
        border: 1px solid #d1d5db;
        border-radius: 4px;
        font-size: 0.8rem;
      }

      .currency-select {
        padding: 0.4rem;
        border: 1px solid #d1d5db;
        border-radius: 4px;
        font-size: 0.8rem;
      }

      /* Weather Widget */
      .weather-widget {
        background: linear-gradient(135deg, #3b82f6, #1d4ed8);
        color: white;
        padding: 0.8rem;
        border-radius: 8px;
        margin-top: 0.5rem;
        font-size: 0.8rem;
      }

      .weather-info {
        display: flex;
        justify-content: space-between;
        align-items: center;
      }

      .weather-temp {
        font-size: 1.2rem;
        font-weight: bold;
      }

      /* Results Section */
      .results-section {
        background: white;
        border-radius: 12px;
        overflow: hidden;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
      }

      .results-header {
        padding: 1.5rem;
        border-bottom: 1px solid #e5e7eb;
        display: flex;
        justify-content: space-between;
        align-items: center;
      }

      .results-count {
        font-weight: 600;
        color: #374151;
      }

      .sort-dropdown {
        padding: 0.5rem;
        border: 1px solid #d1d5db;
        border-radius: 6px;
        background: white;
      }

      /* Hotel Cards */
      .hotel-list {
        display: flex;
        flex-direction: column;
      }

      .hotel-card {
        display: grid;
        grid-template-columns: 250px 1fr auto;
        gap: 1.5rem;
        padding: 1.5rem;
        border-bottom: 1px solid #f3f4f6;
        transition: background-color 0.3s;
      }

      .hotel-card:hover {
        background-color: #f9fafb;
      }

      .hotel-image {
        width: 100%;
        height: 180px;
        object-fit: cover;
        border-radius: 8px;
      }

      .hotel-info {
        display: flex;
        flex-direction: column;
        gap: 0.5rem;
      }

      .hotel-name {
        font-size: 1.3rem;
        font-weight: bold;
        color: #1f2937;
      }

      .hotel-location {
        color: #6b7280;
        font-size: 0.9rem;
      }

      .hotel-rating {
        display: flex;
        align-items: center;
        gap: 0.5rem;
      }

      .stars {
        color: #fbbf24;
      }

      .rating-score {
        background: #0f3460;
        color: white;
        padding: 0.2rem 0.5rem;
        border-radius: 4px;
        font-size: 0.8rem;
        font-weight: bold;
      }

      .amenities-list {
        display: flex;
        flex-wrap: wrap;
        gap: 0.5rem;
        margin-top: 0.5rem;
      }

      .amenity-tag {
        background: #e0f2fe;
        color: #0369a1;
        padding: 0.2rem 0.5rem;
        border-radius: 4px;
        font-size: 0.8rem;
      }

      .hotel-pricing {
        display: flex;
        flex-direction: column;
        align-items: end;
        justify-content: space-between;
      }

      .price {
        font-size: 1.5rem;
        font-weight: bold;
        color: #0f3460;
      }

      .price-per-night {
        font-size: 0.8rem;
        color: #6b7280;
      }

      .converted-price {
        font-size: 0.8rem;
        color: #6b7280;
        margin-top: 0.2rem;
      }

      .book-btn {
        background: #10b981;
        color: white;
        border: none;
        padding: 0.75rem 1.5rem;
        border-radius: 6px;
        font-weight: 600;
        cursor: pointer;
        transition: background-color 0.3s;
      }

      .book-btn:hover {
        background: #059669;
      }

      /* Loading Animation */
      .loading {
        display: none;
        text-align: center;
        padding: 2rem;
      }

      .spinner {
        border: 4px solid #f3f4f6;
        border-top: 4px solid #0f3460;
        border-radius: 50%;
        width: 40px;
        height: 40px;
        animation: spin 1s linear infinite;
        margin: 0 auto 1rem;
      }

      @keyframes spin {
        0% {
          transform: rotate(0deg);
        }
        100% {
          transform: rotate(360deg);
        }
      }

      /* Footer */
      .footer {
        background: #1f2937;
        color: white;
        padding: 2rem 0 1rem;
        margin-top: 3rem;
      }

      .footer-content {
        max-width: 1200px;
        margin: 0 auto;
        padding: 0 20px;
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 2rem;
      }

      .footer-section h4 {
        margin-bottom: 1rem;
        color: #f9fafb;
      }

      .footer-section ul {
        list-style: none;
      }

      .footer-section ul li {
        margin-bottom: 0.5rem;
      }

      .footer-section ul li a {
        color: #d1d5db;
        text-decoration: none;
        transition: color 0.3s;
      }

      .footer-section ul li a:hover {
        color: white;
      }

      .footer-bottom {
        border-top: 1px solid #374151;
        margin-top: 2rem;
        padding-top: 1rem;
        text-align: center;
        color: #9ca3af;
      }

      /* Responsive Design */
      @media (max-width: 768px) {
        .search-form {
          grid-template-columns: 1fr;
        }

        .main-content {
          grid-template-columns: 1fr;
        }

        .filters {
          position: static;
        }

        .hotel-card {
          grid-template-columns: 1fr;
          text-align: center;
        }

        .hotel-pricing {
          align-items: center;
        }
      }
    </style>
  </head>
  <body>
    <!-- Header -->
    <header class="header">
      <div class="header-content">
        <div class="logo">HotelBooking</div>
        <nav class="nav-links">
          <% if (user) { %>
          <span>Welcome, <%= user.name %></span>
          <a href="/user/bookings">Your Bookings</a>
          <a href="/logout">Logout</a>
          <% } else { %>
          <a href="/login">Login</a>
          <a href="/signup">Signup</a>
          <% } %>
        </nav>
      </div>
    </header>

    <!-- Search Section -->
    <section class="search-section">
      <div class="search-container">
        <form class="search-form" id="searchForm">
          <div class="form-group">
            <label for="destination">Destination</label>
            <input
              type="text"
              id="destination"
              name="destination"
              placeholder="Where are you going?"
              value="<%= searchParams && searchParams.destination ? searchParams.destination : '' %>"
            />
          </div>
          <div class="form-group">
            <label for="checkin">Check-in</label>
            <input
              type="date"
              id="checkin"
              name="checkin"
              value="<%= searchParams && searchParams.checkin ? searchParams.checkin : '' %>"
            />
          </div>
          <div class="form-group">
            <label for="checkout">Check-out</label>
            <input
              type="date"
              id="checkout"
              name="checkout"
              value="<%= searchParams && searchParams.checkout ? searchParams.checkout : '' %>"
            />
          </div>
        </form>
      </div>
    </section>

    <!-- Main Content -->
    <div class="main-content">
      <!-- Filters Sidebar -->
      <aside class="filters">
        <!-- Currency Converter Widget -->
        <div class="currency-widget">
          <h4>üí± Currency Converter</h4>
          <div class="currency-converter">
            <input
              type="number"
              class="currency-input"
              id="currencyAmount"
              placeholder="1000"
              value="1000"
            />
            <select class="currency-select" id="fromCurrency">
              <option value="INR">INR</option>
              <option value="USD">USD</option>
              <option value="EUR">EUR</option>
              <option value="GBP">GBP</option>
            </select>
            <span>=</span>
            <select class="currency-select" id="toCurrency">
              <option value="USD">USD</option>
              <option value="INR">INR</option>
              <option value="EUR">EUR</option>
              <option value="GBP">GBP</option>
            </select>
          </div>
          <div
            id="conversionResult"
            style="margin-top: 0.5rem; font-weight: bold; color: #0f3460"
          ></div>
        </div>

        <div class="filter-section">
          <h3>Price Range</h3>
          <div class="price-range">
            <input
              type="number"
              class="price-input"
              id="minPrice"
              placeholder="Min"
              value="0"
            />
            <span>-</span>
            <input
              type="number"
              class="price-input"
              id="maxPrice"
              placeholder="Max"
              value="50000"
            />
          </div>
        </div>

        <div class="filter-section">
          <h3>Star Rating</h3>
          <div class="star-rating">
            <label class="star-option">
              <input type="checkbox" value="5" class="star-filter" />
              <span>‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ (5 stars)</span>
            </label>
            <label class="star-option">
              <input type="checkbox" value="4" class="star-filter" />
              <span>‚òÖ‚òÖ‚òÖ‚òÖ‚òÜ (4 stars)</span>
            </label>
            <label class="star-option">
              <input type="checkbox" value="3" class="star-filter" />
              <span>‚òÖ‚òÖ‚òÖ‚òÜ‚òÜ (3 stars)</span>
            </label>
          </div>
        </div>

        <div class="filter-section">
          <h3>Amenities</h3>
          <div class="amenities">
            <label class="amenity-option">
              <input type="checkbox" value="wifi" class="amenity-filter" />
              <span>Free WiFi</span>
            </label>
            <label class="amenity-option">
              <input type="checkbox" value="pool" class="amenity-filter" />
              <span>Swimming Pool</span>
            </label>
            <label class="amenity-option">
              <input type="checkbox" value="gym" class="amenity-filter" />
              <span>Fitness Center</span>
            </label>
            <label class="amenity-option">
              <input type="checkbox" value="spa" class="amenity-filter" />
              <span>Spa</span>
            </label>
            <label class="amenity-option">
              <input
                type="checkbox"
                value="restaurant"
                class="amenity-filter"
              />
              <span>Restaurant</span>
            </label>
            <label class="amenity-option">
              <input type="checkbox" value="parking" class="amenity-filter" />
              <span>Free Parking</span>
            </label>
          </div>
        </div>
      </aside>

      <!-- Results Section -->
      <main class="results-section">
        <div class="results-header">
          <div class="results-count" id="resultsCount">
            <span id="hotelCount"><%= hotels?.length || 0 %></span> hotels found
          </div>
          <select class="sort-dropdown" id="sortBy">
            <option value="price-low">Price: Low to High</option>
            <option value="price-high">Price: High to Low</option>
            <option value="rating">Rating: High to Low</option>
            <option value="name">Name: A to Z</option>
          </select>
        </div>

        <div class="loading" id="loading">
          <div class="spinner"></div>
          <p>Searching for hotels...</p>
        </div>

        <div class="hotel-list" id="hotelList">
          <% if (hotels && hotels.length > 0) { %> <% hotels.forEach(hotel => {
          %>
          <div
            class="hotel-card"
            data-price="<%= hotel.price %>"
            data-rating="<%= hotel.rating %>"
            data-name="<%= hotel.name %>"
            data-location="<%= hotel.location %>"
          >
            <img
              src="<%= hotel.image %>"
              alt="<%= hotel.name %>"
              class="hotel-image"
            />
            <div class="hotel-info">
              <h3 class="hotel-name"><%= hotel.name %></h3>
              <p class="hotel-location"><%= hotel.location %></p>
              <div class="hotel-rating">
                <span class="stars">
                  <% for(let i = 1; i <= 5; i++) { %> <%= i <= hotel.rating ?
                  '‚òÖ' : '‚òÜ' %> <% } %>
                </span>
                <span class="rating-score"><%= hotel.rating %>/5</span>
              </div>
              <!-- Weather Widget for each hotel location -->
              <div class="weather-widget" id="weather-<%= hotel.id %>">
                <div class="weather-info">
                  <span>üå§Ô∏è Loading weather...</span>
                  <span class="weather-temp">--¬∞C</span>
                </div>
              </div>
              <div class="amenities-list">
                <% hotel.amenities.forEach(amenity => { %>
                <span class="amenity-tag" data-amenity="<%= amenity %>"
                  ><%= amenity %></span
                >
                <% }) %>
              </div>
            </div>
            <div class="hotel-pricing">
              <div>
                <div class="price">‚Çπ<%= hotel.price.toLocaleString() %></div>
                <div class="price-per-night">per night</div>
                <!-- Converted Price Display -->
                <div class="converted-price"></div>
              </div>
              <button
                class="book-btn"
                onclick="bookHotel('<%= hotel.id %>', '<%= hotel.name %>', <%= hotel.price %>)"
              >
                Book Now
              </button>
            </div>
          </div>
          <% }) %> <% } else { %>
          <div style="text-align: center; padding: 3rem; color: #6b7280">
            <h3>No hotels found</h3>
            <p>Try adjusting your search criteria or filters</p>
          </div>
          <% } %>
        </div>
      </main>
    </div>

    <!-- Footer Section -->
    <footer class="footer">
      <div class="footer-content">
        <div class="footer-section">
          <h4>üè® HotelBooking</h4>
          <p>
            Find and book the perfect hotel for your next adventure. Compare
            prices, read reviews, and enjoy exclusive deals.
          </p>
        </div>
        <div class="footer-section">
          <h4>Quick Links</h4>
          <ul>
            <li><a href="/">Home</a></li>
            <li><a href="/hotels">Hotels</a></li>
            <li><a href="/deals">Special Deals</a></li>
            <li><a href="/contact">Contact Us</a></li>
          </ul>
        </div>
        <div class="footer-section">
          <h4>Support</h4>
          <ul>
            <li><a href="/help">Help Center</a></li>
            <li><a href="/cancellation">Cancellation Policy</a></li>
            <li><a href="/terms">Terms & Conditions</a></li>
            <li><a href="/privacy">Privacy Policy</a></li>
          </ul>
        </div>
        <div class="footer-section">
          <h4>Connect With Us</h4>
          <ul>
            <li><a href="#">üìß support@hotelbooking.com</a></li>
            <li><a href="#">üìû +91 1234567890</a></li>
            <li><a href="#">üê¶ Twitter</a></li>
            <li><a href="#">üìò Facebook</a></li>
          </ul>
        </div>
      </div>
      <div class="footer-bottom">
        <p>
          &copy; 2024 HotelBooking. All rights reserved. | Made with ‚ù§Ô∏è for
          travelers
        </p>
      </div>
    </footer>

    <script>
      document.addEventListener("DOMContentLoaded", function () {
        const searchForm = document.getElementById("searchForm");
        const hotelList = document.getElementById("hotelList");
        const loading = document.getElementById("loading");
        const sortBy = document.getElementById("sortBy");
        const minPrice = document.getElementById("minPrice");
        const maxPrice = document.getElementById("maxPrice");
        const starFilters = document.querySelectorAll(".star-filter");
        const amenityFilters = document.querySelectorAll(".amenity-filter");
        const hotelCount = document.getElementById("hotelCount");

        let allHotels = Array.from(document.querySelectorAll(".hotel-card"));
        let filteredHotels = [...allHotels];

        // Search form submission
        searchForm.addEventListener("submit", function (e) {
          e.preventDefault();
          showLoading();

          // Simulate search delay
          setTimeout(() => {
            hideLoading();
            applyFilters();
          }, 1000);
        });

        // Sort functionality
        sortBy.addEventListener("change", function () {
          sortHotels(this.value);
        });

        // Price filter
        minPrice.addEventListener("input", debounce(applyFilters, 300));
        maxPrice.addEventListener("input", debounce(applyFilters, 300));

        // Star rating filters
        starFilters.forEach((filter) => {
          filter.addEventListener("change", applyFilters);
        });

        // Amenity filters
        amenityFilters.forEach((filter) => {
          filter.addEventListener("change", applyFilters);
        });

        function applyFilters() {
          const min = parseInt(minPrice.value) || 0;
          const max = parseInt(maxPrice.value) || Infinity;
          const selectedStars = Array.from(starFilters)
            .filter((f) => f.checked)
            .map((f) => parseInt(f.value));
          const selectedAmenities = Array.from(amenityFilters)
            .filter((f) => f.checked)
            .map((f) => f.value);

          filteredHotels = allHotels.filter((hotel) => {
            const price = parseInt(hotel.dataset.price);
            const rating = parseInt(hotel.dataset.rating);
            const amenityTags = Array.from(
              hotel.querySelectorAll(".amenity-tag")
            ).map((tag) => tag.dataset.amenity);

            // Price filter
            if (price < min || price > max) return false;

            // Star rating filter
            if (selectedStars.length > 0 && !selectedStars.includes(rating))
              return false;

            // Amenity filter
            if (selectedAmenities.length > 0) {
              const hasAllAmenities = selectedAmenities.every((amenity) =>
                amenityTags.some((tag) => tag.toLowerCase().includes(amenity))
              );
              if (!hasAllAmenities) return false;
            }

            return true;
          });

          displayHotels();
          updateResultsCount();
        }

        function sortHotels(sortType) {
          filteredHotels.sort((a, b) => {
            switch (sortType) {
              case "price-low":
                return parseInt(a.dataset.price) - parseInt(b.dataset.price);
              case "price-high":
                return parseInt(b.dataset.price) - parseInt(a.dataset.price);
              case "rating":
                return parseInt(b.dataset.rating) - parseInt(a.dataset.rating);
              case "name":
                return a.dataset.name.localeCompare(b.dataset.name);
              default:
                return 0;
            }
          });
          displayHotels();
        }

        function displayHotels() {
          // Hide all hotels first
          allHotels.forEach((hotel) => (hotel.style.display = "none"));

          // Show filtered hotels
          filteredHotels.forEach((hotel) => (hotel.style.display = "grid"));
        }

        function updateResultsCount() {
          hotelCount.textContent = filteredHotels.length;
        }

        function showLoading() {
          loading.style.display = "block";
          hotelList.style.display = "none";
        }

        function hideLoading() {
          loading.style.display = "none";
          hotelList.style.display = "block";
        }

        function debounce(func, wait) {
          let timeout;
          return function executedFunction(...args) {
            const later = () => {
              clearTimeout(timeout);
              func(...args);
            };
            clearTimeout(timeout);
            timeout = setTimeout(later, wait);
          };
        }

        // Currency Conversion Functionality
        const currencyAmount = document.getElementById("currencyAmount");
        const fromCurrency = document.getElementById("fromCurrency");
        const toCurrency = document.getElementById("toCurrency");
        const conversionResult = document.getElementById("conversionResult");

        // Simple exchange rates (in real app, use live API)
        const exchangeRates = {
          INR: { USD: 0.012, EUR: 0.011, GBP: 0.0095, INR: 1 },
          USD: { INR: 83.5, EUR: 0.92, GBP: 0.79, USD: 1 },
          EUR: { INR: 90.8, USD: 1.09, GBP: 0.86, EUR: 1 },
          GBP: { INR: 105.3, USD: 1.26, EUR: 1.16, GBP: 1 },
        };

        function convertCurrency() {
          const amount = parseFloat(currencyAmount.value) || 0;
          const from = fromCurrency.value;
          const to = toCurrency.value;
          const rate = exchangeRates[from][to];
          const converted = (amount * rate).toFixed(2);
          conversionResult.textContent = `${converted} ${to}`;

          // Update hotel prices
          updateHotelPrices(rate, to);
        }

        function updateHotelPrices(rate, currency) {
          document.querySelectorAll(".hotel-card").forEach((card) => {
            const priceElement = card.querySelector(".converted-price");
            const originalPrice = parseInt(card.dataset.price);
            const convertedPrice = (originalPrice * rate).toFixed(0);
            priceElement.textContent = `‚âà ${convertedPrice} ${currency}`;
          });
        }

        currencyAmount.addEventListener("input", convertCurrency);
        fromCurrency.addEventListener("change", convertCurrency);
        toCurrency.addEventListener("change", convertCurrency);

        // Weather Functionality
        function loadWeatherData() {
          document.querySelectorAll(".hotel-card").forEach((card) => {
            const location = card.dataset.location;
            const weatherWidget = card.querySelector(".weather-widget");

            // Simulate weather data (in real app, use OpenWeatherMap API)
            const weatherData = getSimulatedWeather(location);

            setTimeout(() => {
              weatherWidget.innerHTML = `
                            <div class="weather-info">
                                <span>${weatherData.icon} ${weatherData.condition}</span>
                                <span class="weather-temp">${weatherData.temp}¬∞C</span>
                            </div>
                        `;
            }, Math.random() * 2000 + 500);
          });
        }

        function getSimulatedWeather(location) {
          const conditions = [
            {
              icon: "‚òÄÔ∏è",
              condition: "Sunny",
              temp: Math.floor(Math.random() * 10) + 25,
            },
            {
              icon: "‚õÖ",
              condition: "Partly Cloudy",
              temp: Math.floor(Math.random() * 8) + 22,
            },
            {
              icon: "üåßÔ∏è",
              condition: "Light Rain",
              temp: Math.floor(Math.random() * 6) + 18,
            },
            {
              icon: "üå§Ô∏è",
              condition: "Mostly Sunny",
              temp: Math.floor(Math.random() * 8) + 24,
            },
          ];
          return conditions[Math.floor(Math.random() * conditions.length)];
        }

        // Initialize features
        convertCurrency();
        loadWeatherData();

        // Set minimum date to today
        const today = new Date().toISOString().split("T")[0];
        document.getElementById("checkin").min = today;
        document.getElementById("checkout").min = today;

        // Update checkout min date when checkin changes
        document
          .getElementById("checkin")
          .addEventListener("change", function () {
            document.getElementById("checkout").min = this.value;
          });
      });

      function bookHotel(hotelId, hotelName, price) {
        const checkin = document.getElementById("checkin").value;
        const checkout = document.getElementById("checkout").value;
        const guests = document.getElementById("guests").value;

        if (!checkin || !checkout) {
          alert("Please select check-in and check-out dates");
          return;
        }

        // Simulate booking process
        const bookingData = {
          hotelId: hotelId,
          hotelName: hotelName,
          price: price,
          checkin: checkin,
          checkout: checkout,
          guests: guests,
        };

        // In a real application, this would make an API call
        console.log("Booking hotel:", bookingData);

        // Redirect to booking confirmation (you can customize this URL)
        window.location.href = `/book/${hotelId}?checkin=${checkin}&checkout=${checkout}&guests=${guests}`;
      }
    </script>
  </body>
</html>
